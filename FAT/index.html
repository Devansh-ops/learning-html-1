<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>vaccinated</title>
	<script type="text/javascript">
		const aadhars = new Map([
			["123456789012", ["s", "October 30, 2021"]]
			]);
		const phones = new Map([
			["1234567890", ["d", "July 1, 2020"]]
			]);

		function validate() {
			//alert("Validate");
			var aadhar = document.forms["vaccination"]["aadhaar"].value;
			var phone = document.forms["vaccination"]["phone"].value;
			//alert("aadhaar: " + aadhar + " phone: " + phone);

			var checkAadhaar = /^[0-9]{12}$/;
			var checkPhone = /^[0-9]{10}$/;

			if (aadhar  == null || aadhar == ""){
				//alert("no aadhaar");
				if ( phone.match(checkPhone)){
					return 2;
				}
			}
			else if (aadhar.match(checkAadhaar)){
				return 1;
			}
			return 0;

		}
		function getDetails() {
			//alert("getDetails");
			var val = validate();
			//alert("getDetails");
			if (val == 0){
				alert("Check Input");
			}

			else if (val == 1){
				var x = document.forms["vaccination"]["aadhaar"].value;
				//document.getElementById("ans").innerHTML = aadhars.get(x);
				if (aadhars.has(x) == false){
					document.getElementById("ans").innerHTML = "Not Found!";	
					return false;
				}
				var y = aadhars.get(x);
				document.getElementById("ans").innerHTML = "Dose: ";
				if (y[0] == "s"){
					document.getElementById("ans").innerHTML += "Single Dose ";
				}
				else{
					document.getElementById("ans").innerHTML += "Double Dose ";
				}
				document.getElementById("ans").innerHTML += "<br>Date: ";
				document.getElementById("ans").innerHTML += y[1];
			}
			else if (val == 2){
				var x = document.forms["vaccination"]["phone"].value;
				//document.getElementById("ans").innerHTML = phones.get(x);
				if (phones.has(x) == false){
					document.getElementById("ans").innerHTML = "Not Found!";	
					return false;
				}
				var y = phones.get(x);
				document.getElementById("ans").innerHTML = "Dose: ";
				if (y[0] == "s"){
					document.getElementById("ans").innerHTML += "Single Dose ";
				}
				else{
					document.getElementById("ans").innerHTML += "Double Dose ";
				}
				document.getElementById("ans").innerHTML += "<br>Date: ";
				document.getElementById("ans").innerHTML += y[1];
			}

			return false;
		}
	</script>
</head>
<body>
	<div align="center">
		<h1>Verify Vaccination</h1>	
		<br>
		<h3>BCI3001 Web Security</h3>
		<h3>Lab FAT</h3>
		<h3>Name: Devansh Sehgal</h3>
		<h3>Registration Number: 20BCE0410</h3>
	</div>
	<hr>
	<div align="center">
		<form name="vaccination" onsubmit="return getDetails();">
			<table>
				<tr>
					<td><label for="aadhaar">Enter Aadhaar: </label></td>
					<td><input type="text" name="aadhaar"></td>
				</tr>
				<tr>
					<td><label for="phone">Enter Phone No.: </label></td>
					<td><input type="text" name="phone"></td>
				</tr>
			</table>
			<br>

			<input type="Submit" name="submit" value="Details">
		</form>
	</div>
	<br>
	<div id="ans" align="center"></div>
</body>
</html>
